!function(n){var e,a,s=-1,o="",t=document.getElementsByClassName("Search__reset")[0],r=document.getElementsByClassName("Search")[0],l=document.getElementsByClassName("Search__input-wrapper")[0],i=document.getElementsByClassName("Search__input")[0];function d(e){var t=document.getElementsByClassName("Search__list")[0];"ArrowUp"===e.key&&(e.preventDefault(),0===s||-1===s?s=t.childNodes.length-1:s--,h(t,s)),"ArrowDown"===e.key&&(e.preventDefault(),s===t.childNodes.length-1?s=0:s++,h(t,s)),"Escape"===e.key&&(e.preventDefault(),c())}function u(e,t){var n=document.createElement("span");n.className="Search__suggestion-category",n.textContent=e,t.appendChild(n)}function g(e,t){var n=document.createElement("span");n.className="Search__suggestion-title",n.textContent=e,t.appendChild(n)}function m(){o=this.getAttribute("data-suggestion"),e=this.getAttribute("data-category-id"),window.location=e?"/search?category_ids="+e+"&keywords="+o:"/search?keywords="+o}function c(){var e=document.getElementsByClassName("Search__suggester");e.length&&(e[0].remove(),0<=s&&(s=-1),window.removeEventListener("keydown",d))}function h(e,t){for(var n=0;n<e.childNodes.length;n++)n===t?e.childNodes[t].classList.add("Search__suggestion--active"):e.childNodes[n].classList.remove("Search__suggestion--active")}t&&(r.addEventListener("submit",function(e){e.preventDefault();var t=document.getElementsByClassName("Search__suggester").length,n=document.getElementsByClassName("Search__list")[0];0<=s&&t?n.children[s].click():this.submit()}),t.addEventListener("click",function(){i.value="",r.submit()}),i.addEventListener("input",function(e){e.preventDefault();var t=e.target.value;!function(e,t){a&&clearTimeout(a);if(!e.length)return c();a=setTimeout(function(){return n.SEO_LANDING_API.getSuggestionsByKeyword(e,t)},150)}(o=t,function(e){c(),e.length&&function(e){var t=document.createElement("div");t.className="Search__suggester",l.append(t);var n=document.createElement("ul");n.className="Search__list";for(var a=0;a<e.length;a++){var s=e[a],o=s.suggestion,r=s.category_name,i=s.category_id,c=document.createElement("li");c.className="Search__suggestion",c.onclick=m,c.setAttribute("data-suggestion",o),r&&c.setAttribute("data-category-id",i),g(o,c),r&&u(r,c),n.appendChild(c)}t.appendChild(n),window.addEventListener("keydown",d)}(e)})})),window.addEventListener("click",function(e){document.getElementsByClassName("Search__suggester")[0]&&!document.getElementsByClassName("Search__suggester")[0].contains(e.target)&&"submit"!==e.target.type&&c()})}(NAMESPACE=NAMESPACE||{});var NAMESPACE,API_V3_ENDPOINT="/api/v3",ENVIRONMENT={docknum:"dock110"};function getEnvironmentUrl(){return-1<window.location.href.indexOf(".beta")?"https://api.beta.wallapop.com":-1<window.location.href.indexOf(".dock")?"https://apigw."+window.location.href.substr(window.location.href.indexOf("dock"),7)+".devel.wallapop.com":-1<window.location.href.indexOf(".dev")?"https://apigw."+ENVIRONMENT.docknum+".devel.wallapop.com":"https://api.wallapop.com"}(NAMESPACE=NAMESPACE||{}).SEO_LANDING_API={getSuggestionsByKeyword:function(e,t){var n=getEnvironmentUrl(),a=new XMLHttpRequest;a.open("GET",n+API_V3_ENDPOINT+"/suggesters/search?keyword="+e+"&language=en_US"),a.responseType="json",a.send(),a.onload=function(){return 200===a.status&&t(a.response),!1}}};